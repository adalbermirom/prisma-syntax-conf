# Define a vari√°vel SUDO. O usu√°rio deve prefixar o comando 'make' com o utilit√°rio correto (ex: sudo make install).
SUDO ?= 

# ------------------------------------------------
# Vari√°veis de Configura√ß√£o
# ------------------------------------------------

# Define os c√≥digos ANSI para facilitar a leitura
RED := \033[31m
NC := \033[0m # No Color - Reseta a cor

# Nome do arquivo de sintaxe final
TARGET_NAME := prisma.nanorc

# Destino no sistema
DEST_DIR := /usr/share/nano/

# ------------------------------------------------
# Regras Principais
# ------------------------------------------------

.PHONY: all install uninstall clean

# Alvo padr√£o: make √© o mesmo que make install
all: install

# 1. Regra de Instala√ß√£o
# Requer privil√©gios de root para copiar para /usr/share/nano/
install:
	@echo "--------------------------------------------------------"
	@echo "üö® Instalando $(TARGET_NAME) em $(DEST_DIR). $(RED)Requer privil√©gios de root.$(NC)"
	@echo "--------------------------------------------------------"
	
	# Copia para o diret√≥rio de destino
	$(SUDO) cp -v $(TARGET_NAME) $(DEST_DIR)
	
	@echo "‚úÖ Instala√ß√£o conclu√≠da. Reinicie o Nano."


# 3. Regra de Desinstala√ß√£o
# Requer privil√©gios de root para remover de /usr/share/nano/
uninstall:
	@echo "--------------------------------------------------------"
	@echo "üóëÔ∏è  Desinstalando $(TARGET_NAME). Requer privil√©gios de root."
	@echo "--------------------------------------------------------"
	$(SUDO) rm -f $(DEST_DIR)/$(TARGET_NAME)
	@echo "Remo√ß√£o conclu√≠da."

# 4. Regra de Limpeza
# Remove o arquivo tempor√°rio gerado localmente
clean:
	@echo "Removendo arquivo tempor√°rio localmente..."
	@rm -f $(TARGET_NAME)
	@echo "Limpeza conclu√≠da."
